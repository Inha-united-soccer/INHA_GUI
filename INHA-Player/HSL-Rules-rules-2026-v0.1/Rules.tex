% !TeX spellcheck = en_US
\documentclass[12pt]{article}

\input{common/variables}
\input{common/dates}

\setcounter{secnumdepth}{4}

\usepackage{times,fullpage,xspace,fancyhdr,url,color}
\usepackage[pdftex]{graphicx}
\usepackage[pdftex,
            colorlinks=true,
            urlcolor=black,
            linkcolor=black,
            citecolor=black,
            bookmarksopen=false,
            bookmarksnumbered=true,
            pdfstartview=FitH]{hyperref}

\pdfcompresslevel=9

\hypersetup{
 pdftitle={\leaguename (\leaguenameabbr) Rule Book},
 pdfauthor={Technical Committee \leaguenameabbr},
}
\usepackage{microtype}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{xargs}
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\usepackage{siunitx}
\usepackage[capitalize,noabbrev]{cleveref}
\usepackage[official]{eurosym}
\usepackage[useregional]{datetime2}
\usepackage{subcaption}
\usepackage{enumitem}
\usepackage{xcolor}
\DTMlangsetup[en-GB]{ord=raise,monthyearsep={,\space}}

% modern and easy to use tables tblr
\usepackage{tabularray}

\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=green,backgroundcolor=green!25,bordercolor=green,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=orange,backgroundcolor=orange!25,bordercolor=orange,#1]{#2}}

% comment 'disable' in to disable all the todo notes :)
\usepackage
[
%disable
]{todonotes}

\usepackage[theorems]{tcolorbox}
\newtcbtheorem[number within=section]{hintbox}{}%
{colback=red!10,colframe=red!45!black,fonttitle=\bfseries}{th}

\usepackage{tikz}
\usetikzlibrary{backgrounds,arrows,calc,math,positioning,shapes, decorations.markings,decorations.pathreplacing}

\usepackage{tikz-3dplot}

\usepackage{tocloft}
\cftsetindents{section}{0em}{2em}
\cftsetindents{subsection}{0em}{2em}
\renewcommand\cfttoctitlefont{\hfill\Large\bfseries}
\renewcommand\cftaftertoctitle{\hfill\mbox{}}

\sloppy
\newcommand{\ie}{\mbox{i.\,e.}\xspace}
\newcommand{\eg}{\mbox{e.\,g.}\xspace}
%\newcommand{\cf}{\mbox{cf.}\xspace}
\newcommand{\cf}{see\xspace}
% \newcommand{\comment}[1]{\marginpar{\pdfannot width 4in height .5in depth 8pt {/Subtype /Text /Contents (#1)}}}
\newcommand{\inparagraph}[1]{\paragraph{#1\hspace{-1em} }}


% some colors
\definecolor{orange}{rgb}{1,0.5,0}
\definecolor{red}{rgb}{1,0,0}
\definecolor{green}{rgb}{0,1,0}


%%%%%%%%%%%%%%%%%%% GENERAL SECTION NUMBERING %%%%%%%%%%%%%%%%%%%%%%%

% Section numbering formats
\renewcommand{\thesection}{\Roman{section}}
\renewcommand{\thesubsection}{\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{subsection}.\arabic{subsubsection}}

% Counter hierarchy (important!)
\makeatletter
\@addtoreset{subsection}{section}
\@addtoreset{subsubsection}{subsection}
\makeatother

% unnumbered subsection that is still listed in toc
\makeatletter
\newcommand{\subsectionNoNumber}[1]{%
  \subsection*{#1}%
  \phantomsection%
  \addcontentsline{toc}{subsection}{\protect\numberline{}#1}%
}
\makeatother


%%%%%%%%%%%%%%%%%%% SPECIFIC SECTION FORMAT %%%%%%%%%%%%%%%%%%%%%%%
% 
% Subdivision for the laws of the game:
%
%   \law{<N>}{<Title>}
%   \sublaw{<Title>}
%   \paragraph{<Title>}
%
% NOTE: the number <N> mus be fixed, e.g.,
%   \law{3}{My Big Law}
%

% width reserved for the law number in the TOC, adjust if necessary
\newlength{\lawnumwidth}
\setlength{\lawnumwidth}{2em}

% only for unique hyperlink targets; does not affect sectioning
\newcounter{lawtmp} 

\newcommand{\law}[2]{%
  \par\refstepcounter{lawtmp}% creates a unique anchor each time (for hyperlinks)
  \setcounter{subsection}{#1}%
  \setcounter{subsubsection}{1}%
  \renewcommand{\thelawtmp}{\thesubsection}
  \subsection*{§ #1\quad #2}% printed heading
  %\addcontentsline{toc}{subsection}{\protect\numberline{}§ #1\quad #2}
  \addcontentsline{toc}{subsection}{%
    \protect\numberline{}\makebox[2.5em][l]{§ #1} #2%
  }%
}

\newcommand{\sublaw}[1]{%
  \par\refstepcounter{lawtmp}% creates a unique anchor each time (for hyperlinks)
  \begingroup
    \renewcommand{\thelawtmp}{\thesubsubsection}%
    \renewcommand{\thesubsubsection}{§~\thesubsection.\arabic{subsubsection}}%
    \subsubsection{#1}%
  \endgroup
}

\renewcommand{\theparagraph}{§~\thesubsubsection.\arabic{paragraph}}%


% proper names for the \Cref and \cref

%\crefname{lawtmp}{Law}{Laws}
%\Crefname{lawtmp}{Law}{Laws}

% simply use Paragraph numbers
\crefname{lawtmp}{§}{§}
\Crefname{lawtmp}{§}{§}
\Crefname{paragraph}{}{}

%%%%%%%%%%%%%%%%%%% TEXT FORMAT %%%%%%%%%%%%%%%%%%%%%%%

\setlength{\parindent}{0pt}
\setlength{\parskip}{12pt plus 6pt minus 3 pt}
\widowpenalty=10000
\clubpenalty=10000

% needed to align an image and text correctly side by side
%\newcommand{\imagebox}[1]{\raisebox{2ex}{\raisebox{-\height}{#1}}}


%%%%%%%%%%%%%%%%%%% TITLE %%%%%%%%%%%%%%%%%%%%%%%

\title{Rule Book\\\leaguename (\leaguenameabbr)}

\author{\leaguename Technical Committee\\\url{https://hsl.robocup.org/}}
\date{(DRAFT \RCYear Working Rules Document, as of \today)}

\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

%%%%%%%%%%%%%%%%%%% PAGE HEADER FORMAT %%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{fancy}
% make sure that a separate page can be identified 
\lhead{Rule Book}
\chead{\leaguename}
\rhead{\today}
\lfoot{}
%\cfoot{}
%\cfoot{\thepage}
\rfoot{}


\begin{document}

\pagenumbering{Roman}

\maketitle
\thispagestyle{empty}

\begin{center}
  Questions or comments on these rules should be submitted via the following channels:
  \begin{itemize}
      \item \url{https://github.com/RoboCup-HumanoidSoccerLeague/HSL-Rules/issues};
      \item Discord server: \url{https://discord.gg/67upw6Nn}, channel \texttt{\#rule-book};
      \item Email:\footnote{a dedicated mailing list for the \leaguenameabbr will be set up and should be used in the future. For now any of the two mailing lists of the former leagues can be used.}
      \begin{itemize}
        \item (SPL) \url{rc-spl-tc-owner@lists.robocup.org}
        \item (HL) \url{rc-hl-tc@lists.robocup.org}
      \end{itemize}
  \end{itemize}
\end{center}

\newpage
\setcounter{tocdepth}{2}
\tableofcontents

\thispagestyle{fancy}

\clearpage
\pagenumbering{arabic}
\setcounter{page}{1}

\newpage

\include{rules/introduction}
\newpage

\include{rules/notes}
\newpage

\include{rules/environment}
\newpage

\include{rules/robot_players}
\newpage

\include{rules/judgement}
\newpage

% THIS CHAPTER WAS REMOVED BY REINALDO AS IT CONTAINS THE SAME INFORMATION AS CHAPTER 3
%\include{rules/competitions_divisions}
%\newpage

\include{rules/game}
\newpage

\include{rules/changes}
\newpage

\appendix
% THIS CHAPTER WAS REMOVED BY REINALDO AS IT CONTAINS THE SAME INFORMATION AS CHAPTER 3
%\include{rules/app_competition_rules}
%\newpage

%\include{rules/app_venue_setup}
%\newpage

\include{rules/app_technical_drawings}

\end{document}
